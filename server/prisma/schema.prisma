generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model employee_forms {
  id          Int           @id @default(autoincrement())
  user_id     Int
  timestamp   DateTime?     @default(now()) @db.Timestamp(6)
  form_type   String 
  users       users         @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "employee_forms_users")
  form_inputs form_inputs[]
}

model form_fields {
  form_field_id Int           @id @default(autoincrement())
  description   String?
  order_index   Int?
  timestamp     DateTime?     @default(now()) @db.Timestamp(6)
  form_inputs   form_inputs[]
}

model form_inputs {
  id               Int            @id @default(autoincrement())
  employee_form_id Int
  form_field_id    Int
  status           String?        @db.VarChar(55)
  edit             String?
  timestamp        DateTime?      @default(now()) @db.Timestamp(6)
  employee_forms   employee_forms @relation(fields: [employee_form_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "form_inputs_employee_forms")
  form_fields      form_fields    @relation(fields: [form_field_id], references: [form_field_id], onDelete: NoAction, onUpdate: NoAction, map: "form_inputs_form_fields")
}

model users {
  id             Int              @id @default(autoincrement())
  vorname        String
  nachname       String
  email          String?          @unique @db.Citext
  adresse        String
  austrittsdatum DateTime?        @db.Date
  createdAt      DateTime         @default(now()) @db.Timestamp(6)
  eintrittsdatum DateTime         @db.Date
  geburtsdatum   DateTime         @db.Date
  position       String
  updatedAt      DateTime         @updatedAt @db.Timestamp(6)
  employee_forms employee_forms[]
}


model Session {
  id String @id @default(cuid())
  userId String
  userAgent String?
  createdAt DateTime @default(now())
  expiresAt DateTime @default(dbgenerated("NOW() + INTERVAL '30 days'"))

  user User @relation(fields: [userId], references: [id])

  @@index([userId])

}

model User {
  id String @id @default(cuid())
  email String @unique @db.Citext
  password String
  verified Boolean @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  sessions Session[]
  verificationCodes VerificationCode[]
}

model VerificationCode {
  id        String   @id @default(cuid())
  userId    String
  type      String
  createdAt DateTime @default(now())
  expiresAt DateTime

  // Relation to User model
  user User @relation(fields: [userId], references: [id])

  @@index([userId])

}